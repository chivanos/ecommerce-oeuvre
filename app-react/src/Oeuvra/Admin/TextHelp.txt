Correctif - L'exportation 'useHistory' n'a pas Ã©tÃ© trouvÃ©e dans react-router-dom
avatar
Borislav Hadzhiev

DerniÃ¨re mise Ã  jour : 20 avril 2022

banniÃ¨re
DÃ©couvrez mon nouveau livre

Correction - L'exportation 'useHistory' n'a pas Ã©tÃ© trouvÃ©e dans react-router-dom #
Pour rÃ©soudre l'erreur "export 'useHistory' (importÃ© en tant que 'useHistory') n'a pas Ã©tÃ© trouvÃ© dans 'react-router-dom'", utilisez useNavigateplutÃ´t le crochet, par exemple const navigate = useNavigate(). Le hook renvoie une fonction qui vous permet de naviguer par programmation.

l'historique d'utilisation d'exportation n'a pas Ã©tÃ© trouvÃ© dans le routeur de rÃ©action-dom

App.js
// ğŸ‘‡ï¸ import useNavigate
import {useNavigate} from 'react-router-dom';

export default function App() {
  const navigate = useNavigate();

  const handleClick = () => {
    // ğŸ‘‡ï¸ navigate programmatically
    navigate('/about');
  };

  return (
    <div>
      <button onClick={handleClick}>Navigate to About</button>
    </div>
  );
}
Dans la version 6 du routeur React, le useHistory()hook est remplacÃ© par useNavigate().

Le useNavigatehook renvoie une fonction qui nous permet de naviguer par programmation, par exemple aprÃ¨s la soumission d'un formulaire.


Le paramÃ¨tre que nous avons passÃ© Ã  la navigatefonction est le mÃªme que le toprop sur un <Link to="/about">composant.

Si vous souhaitez utiliser l'Ã©quivalent de la history.replace()mÃ©thode, passez un optionsparamÃ¨tre Ã  la navigatefonction.

App.js
import {useNavigate} from 'react-router-dom';

export default function App() {
  const navigate = useNavigate();

  const handleClick = () => {
    // ğŸ‘‡ï¸ replace set to true
    navigate('/about', {replace: true});
  };

  return (
    <div>
      <button onClick={handleClick}>Navigate to About</button>
    </div>
  );
}
Lorsque la replacepropriÃ©tÃ© est dÃ©finie truesur l'objet options, l'entrÃ©e actuelle dans la pile d'historique est remplacÃ©e par la nouvelle.

En d'autres termes, la navigation vers le nouvel itinÃ©raire ne poussera pas une nouvelle entrÃ©e dans la pile d'historique, donc si l'utilisateur clique sur le bouton de retour, il ne pourra pas naviguer vers la page prÃ©cÃ©dente.
Ceci est utile, par exemple, lorsqu'un utilisateur se connecte - vous ne voulez pas qu'il puisse cliquer sur le bouton de retour et revenir Ã  la page de connexion.

Ou si vous avez un itinÃ©raire qui redirige les utilisateurs vers une autre page, vous ne voulez pas que les utilisateurs cliquent sur le bouton de retour et soient Ã  nouveau redirigÃ©s.

Vous pouvez Ã©galement appeler la navigatefonction avec un delta pour revenir en arriÃ¨re dans la pile de l'historique, par exemple, navigate(-1)c'est la mÃªme chose que d'appuyer sur le bouton de retour.